<!DOCTYPE html>
<html lang="fr"
      data-th-replace="~{layout::layout(contenu=~{::main},titre=~{::title})}"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Détail de l'enchère</title>
    <link rel="stylesheet" th:href="@{/css/details.css}" href="/css/details.css" />
</head>
<body>
<main class="detail-container">
    <h1>Détail D'un Article</h1>
<!--    <h1 data-th-text="${acquereur.nom} + ' a remporté la vente'"> </h1>-->
<!--    <h1>Vous avez remportez l'enchere</h1>-->
    
    <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
    <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>
    
    <div style="text-align:center; margin-bottom:2rem;">
        <img th:src="@{/${article.photo}}" alt="Image de l'article" class="nav-logo" th:if="${article.photo != null and article.photo != ''}" style="max-width:300px;" />
        <img src="/images/default.webp" alt="Image par défaut" class="nav-logo" th:if="${article.photo == null or article.photo == ''}" style="max-width:300px;" />
        <p style="color:red;font-weight:bold;">Valeur photo (debug) : <span th:text="${article.photo}"></span></p>
    </div>
    
    <div class="detail-table">
        <div class="row">
            <div class="cell label">Article :</div>
            <div class="cell value" th:text="${article.nom_article}"></div>
            <div class="cell label">Mise à prix :</div>
            <div class="cell value" th:text="${article.prix_initial} + ' point(s)' "></div>
        </div>
        <div class="row">
            <div class="cell label">Catégorie :</div>
            <div class="cell value" th:text="${article.categorie.libelle}"></div>
            <div class="cell label">Meilleure offre :</div>
            <div class="cell value">1 point (s)</div>
        </div>
        <div class="row">
            <div class="cell label">Description :</div>
            <div class="cell value" th:text="${article.description}" colspan="3"></div>
            <div class="cell label">Fin de l'enchère :</div>
            <div class="cell value" th:text="${#dates.format(article.date_fin_enchere, 'dd/MM/yyyy')}"></div>
        </div>
    </div>
    <div class="detail-bottom">
        <div class="retrait">
            <span class="label">Retrait :</span>
            <span class="value" th:text="${article.adresse_retrait.rue + ' ' + article.adresse_retrait.code_postal + ' ' + article.adresse_retrait.ville}"></span>
        </div>
        <div class="vendeur">
            <span class="label">Vendeur :</span>
            <a class="value" data-th-href="@{/utilisateur/profil(pseudo=${article.vendeur.pseudo})}" th:text="${article.vendeur.pseudo}"></a>
        </div>
        <div class="enchere-input">
            <label for="montant_propose">Votre enchère :</label>
            <input type="number" id="montant_propose" name="montant" min="0" step="0.5" required>
        </div>
        <form th:action="@{/enchere/soumettre}" method="post">
            <input type="hidden" name="no_article" th:value="${article.no_article}">
            <div class="button-detail">
                <button type="submit" class="btn btn-primary">Valider l'enchère</button>
            </div>
        </form>
        <div class="button-detail">
            <a th:href="@{/enchere}" class="btn btn-primary">Retour</a>
        </div>
    </div>

</main>
</body>
</html>