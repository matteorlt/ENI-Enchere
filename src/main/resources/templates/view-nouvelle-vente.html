<!DOCTYPE html>
<html lang="fr" data-th-replace="~{layout::layout(contenu=~{::main},titre=~{::title})}" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Nouvelle vente</title>
</head>
<main class="vente-main">
    <div class="vente-container">
        <h1 class="vente-container__title">Nouvelle vente</h1>
        
        <div th:if="${error}" class="alert alert--danger" th:text="${error}"></div>
        <div th:if="${success}" class="alert alert--success" th:text="${success}"></div>

        <form th:action="@{/vendre}" method="post" class="form-container vente-form">
            <div class="form-group">
                <label for="nomArticle" class="form-group__label form-group__label--required">Article :</label>
                <input type="text" id="nomArticle" name="nomArticle" class="form-group__input" th:value="${article?.nom_article}" required>
            </div>

            <div class="form-group">
                <label for="categorie" class="form-group__label form-group__label--required">Cat√©gorie :</label>
                <select id="categorie" name="categorie" class="form-group__select" required>
                    <option value="">S√©lectionnez une cat√©gorie</option>
                    <option th:each="cat : ${categories}"
                            th:value="${cat.no_categorie}"
                            th:text="${cat.libelle}">
                    </option>
                </select>
            </div>

            <div class="form-group">
                <label for="description" class="form-group__label form-group__label--required">Description :</label>
                <textarea id="description" name="description" class="form-group__textarea" th:text="${article?.description}" required style="width: 534px; height: 200px;"></textarea>
            </div>

            <div class="form-group">
                <label for="miseAPrix" class="form-group__label form-group__label--required">Mise √† prix :</label>
                <input type="number" id="miseAPrix" name="miseAPrix" class="form-group__input" th:value="${article?.prix_initial}" required min="1">
            </div>

            <div class="form-group">
                <label for="dateDebut" class="form-group__label form-group__label--required">D√©but de l'ench√®re :</label>
                <input type="datetime-local" id="dateDebut" name="dateDebut" class="form-group__input" required>
            </div>

            <div class="form-group">
                <label for="dateFin" class="form-group__label form-group__label--required">Fin de l'ench√®re :</label>
                <input type="datetime-local" id="dateFin" name="dateFin" class="form-group__input" required>
            </div>

            <div class="form-group">
                <label class="form-group__label">Retrait :</label>
                <div th:if="${utilisateur?.adresse}" class="vente-form__retrait">
                    <p class="vente-form__retrait-info">
                        <span th:text="${utilisateur.adresse.rue}"></span><br>
                        <span th:text="${utilisateur.adresse.code_postal}"></span>
                        <span th:text="${utilisateur.adresse.ville}"></span>
                    </p>
                    <input type="hidden" name="retrait" th:value="${utilisateur.adresse.no_adresse}">
                </div>
                <div th:unless="${utilisateur?.adresse}" class="alert alert--warning">
                    Vous devez avoir une adresse de retrait pour vendre un article.
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" name="action" value="enregistrer" class="btn btn--primary">Enregistrer</button>
                <button type="submit" name="action" value="annulerVente" class="btn btn--secondary">Annuler</button>
            </div>
        </form>
        <div class="vente-container__photo-link">
            <a th:href="@{/ajouter-photo}" class="btn btn--outline">üì∑ Ajouter une photo</a>
        </div>
    </div>
</main>
</html>